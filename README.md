# はじめに

N-DEVをご利用いただきましてありがとうございます。

本テンプレートは「Nuxt3」×「Vuetify3」×「Firebase」×「MySQL」を想定して作成されております。  
それ以外の環境でも一部ご利用いただけますが、その場合は適宜修正が必要です。  
また、本テンプレートにより発生した如何なる問題についても一切の責任を負いかねますので、ご了承ください。

## N-DEVとは

株式会社NEXSが開発している、DB設計のサポート、及びDB設計を元にしたDBの作成・マイグレーション、
また各種コード、UI、APIの自動生成を行うためのツールです。

## N-DEV（ https://n-dev.vercel.app/ ）の使い方

### 前提

開発に必要な環境を構築してください。例として以下のような項目が挙げられます。

- Node.js
- 「npm」「yarn」「bun」等のパッケージ管理ツール（環境によってはnpmはNode.jsと同時にインストールされます）
- 「Visual Studio Code」「Web Storm」等WEBアプリケーション開発に使用できるエディタ、IDEとその設定
- DB（MySQL（又はMariaDB））とSQLクライアントツール（DBeaver、TablePlus、phpMyAdmin 等）
- Firebaseを使用する場合
    - Firebaseの設定等
    - 「firebase-tools」のグローバルインストール

### アカウントの作成

現在、サービスのご利用にはアカウントの作成が必要です。  
メールログイン、Googleログイン、GitHubログインのいずれかが選択可能です。  
メールログインの場合、メールの認証が必要です。

### アプリの作成・選択

「アプリ一覧（/apps）」ページより、新規アプリの作成、または既存のアプリの選択が可能です。
初回はアプリの作成を行ってください。  
作成後、対象のアプリを選択することで、アプリに対する各種機能がご利用いただけます。

### 管理者の追加

「管理者（/member）」ページより、必要に応じて管理者を追加できます。複数人での開発を行う場合、複数の管理者を追加してください。  
ただし、現状DBの設計は最後に保存されたデータで上書きされ、編集中の同期はされないことに注意してください。

### DB設計

「DB設計（/db）」ページより、DBの設計ができます。  
既に対象のDBが存在する場合、「ホスト」への接続、又はDBのダンプファイルからのインポートが可能です。  
＊ 現在想定されるDBはMySQLのみとなっています。  
＊「mysqldump」又は「phpMyAdmin」によってエクスポートされたデータが対象です。  
＊ 「localhost」には接続できません。

### DB作成

アプリが接続するDBが存在しない場合には、DBの作成が必要です。
「DB設計・マイグレーション（/db）」のページより、「SQL ダウンロード」を行い、生成されたSQLファイルを用いてDBの作成が可能です。

### DBマイグレーション

現状、DBの「テーブル」を作成するSQL文を発行、又は「ホスト」に送信・実行する機能のみ実装されています。  
テーブル名右側のアイコン群最左のアイコンをクリックすることで、SQL文の発行が可能です。  
＊テーブルを削除して再作成する場合、既存のデータは削除されることに注意してください。

### 自動生成されたテンプレートプロジェクトのダウンロード

DBの設計が完了したら、「自動生成（/code）」ページより、自動生成されたテンプレートプロジェクトをダウンロードしてください。  
「プロジェクトテンプレート」の「アプリ名」フォルダをクリックすることで、テンプレート全体がダウンロードされます。
なお、ご使用の環境によってはウイルスと判定されることでダウンロードできない場合があります。
その場合はセキュリティソフトの設定等をご覧ください。

### テンプレートプロジェクトの依存関係のインストール

本テンプレートをダウンロード後、「npm install」等コマンドを利用して依存関係をインストールしてください。

## テンプレートの修正

必要に応じてコードの修正を行ってください。以下にコード修正箇所の例を示します。

- ファイルのフォーマット、リンターの導入
- 「//NOTE:」の検索、修正や設定が必要な箇所に「//NOTE:」を付記してあります
- アプリタイトルの変更（/composables/index.ts - useStore - title）
- ログを記録する関数の修正（/server/utils/apiConf.ts - log）
- Firebaseの設定ファイル書き換え（Firebaseを使用する場合）
    - 「/plugins/firebase.client.ts」のFirebase設定情報を書き換え
    - 「/server/firebaseUtil - initializeFirebase」のFirebase管理者情報を書き換え
    - 「/composables/index.ts - useFirebaseAuth」で「Firebase Authentication」の認証（onAuthStateChanged）後にログイン状態を書き換えるよう修正
- MySQLの設定ファイル書き換え
    - 「server/utils/dbUtil.ts - getDB」にて接続DB情報を設定
- ルーティング、ページ設定の修正
    - （現状）「composables/index.ts - useStore - pages」にサイドナビゲーションに表示するページを設定）
- 削除確認文の修正
  - 各コンポーザブルファイル「/composables/{className}.ts - delete{ClassName}」の削除確認文を修正
- その他、必要に応じて修正してください
  - VuetifyのUIコンポーネント初期値、及びテーマカラー「/plugins/vuetify.ts」
  - アイコン「/public/icon.png」、ファビコン「/public/favicon.ico」
  - 他
